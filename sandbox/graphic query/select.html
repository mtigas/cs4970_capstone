<!DOCTYPE html>
<html>
<head>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7/jquery-ui.min.js"></script>
  <link type="text/css" href="./js/css/ui-lightness/jquery-ui-1.7.2.custom.css" rel="stylesheet" />
  
<script type="text/javascript">

//var URL ="";
//var GET_STRING="?";

//"global" tables,tNames array with joined cols,tab names
var count=0; //the current number of selections
var SELECTION_MAX=5;
var ops=[">","<","=",">=","<="];

function  addSelector(containerId){
//alert("hey13");
  if(count>=SELECTION_MAX){
    return;
  }
  //alert("hey17");
  //create a div for this selector
  newSelectionDiv = document.createElement('div');
  newSelectionDiv.id = "selector"+count;
  //alert("hey21");
  
  //create the buttons
  innerHt = "<input id=\"del"+count+"\" type=\"button\" value=\"Del\" onclick=\"delSelector('selector"+count+"');\"/>";
  innerHt += "<input id=\"addButton\" type=\"button\" value=\"Add\" onclick=\"addSelector('selections');\"/>";
  //alert("hey26");
  //add the option box
  innerHt+= addOptionToSelector("column"+count,tables);
  
  //add the ops box
  innerHt+= "<select id=\"op"+count+"\"><option>></option><option><</option><option>=</option><option>>=</option><option><=</option></select>";
  //alert("hey32");
  //add textfield
  innerHt+="<input id=\"val"+count+"\" />";
  
  newSelectionDiv.innerHTML=innerHt;
  document.getElementById(containerId).appendChild(newSelectionDiv);
  //alert("hey38");
  count++;
  //alert("created a selector");
}

function addOptionToSelector(id,options){
  //alert("hey44");
  var test="";
  test+="<select id=\""+id+"\" width=\"99\">";
  //alert("hey46");
  for(i=0;i<options.length;i++){
    for(s=0;s<options[i].length;s++){
    test+="<option value='"+aliass[i]+"."+options[i][s]+"'>"+aliass[i]+options[i][s]+"</option>";
    //alert("hey");
    }
  }
  test+="</select>";
  return test;
}

function delSelector(selectId){
  if(count-1==0){
    return;
  }
  
  document.getElementById("selections").removeChild( document.getElementById(selectId) ); //uh, yeah..
  count--;
}
$(document).ready(function(){
//alert(wsRef);
//alert("hey");

//function handleLoad(){
  //column data from somewhere...
  //column data in tables
 // tables=new Array();
 // tables[0]="dkjs;f";
  //tables[1]="sdn";
  
  //add a selector to the container
  //alert("adding a selector");
  addSelector("selections");
  //}
});
</script>
</head>

<body >
<div id="selections">

</div>
</body>